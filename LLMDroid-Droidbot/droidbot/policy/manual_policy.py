from .input_policy import *
from .utg_based_policy import UtgBasedInputPolicy
from ..desc.action_type import ActionType


class ManualPolicy(UtgBasedInputPolicy):
    """
    manually explore UFG
    """

    def __init__(self, device, app, code_coverage):
        super(ManualPolicy, self).__init__(device, app, False, code_coverage)
        self.logger = logging.getLogger(self.__class__.__name__)

        self.__first_event = True

    def generate_event_based_on_utg(self):
        """
        generate an event based on current UTG
        @return: InputEvent
        """
        if self.__first_event:
            self.__first_event = False
            self.logger.info("Trying to start the app...")
            start_app_intent = self.app.get_start_intent()
            return IntentEvent(intent=start_app_intent, action_type=ActionType.START)
        else:
            return ManualEvent()
